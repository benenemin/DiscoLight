/*
 * Copyright (c) 2024 Espressif Systems (Shanghai) Co., Ltd.
 *
 * SPDX-License-Identifier: Apache-2.0
 */
/dts-v1/;

#include "espressif/esp32s3/esp32s3_wroom_n8r8.dtsi"
#include "esp32s3_control_board-pinctrl.dtsi"
#include <zephyr/dt-bindings/led/led.h>
#include <espressif/partitions_0x0_amp.dtsi>

/ {
	model = "Espressif ESP32S3-CONTROL-BOARD PROCPU";
	compatible = "espressif,esp32s3";

//	zephyr,user {
//		io-channels = <&adc0 0>;
//	};

	aliases {
		led-strip = &led_strip;
		ctrl-btn = &button1;
	};

	chosen {
		zephyr,sram = &sram1;
		zephyr,console = &usb_serial;
		zephyr,flash = &flash0;
		zephyr,code-partition = &slot0_partition;
	};


	leds {
		compatible = "gpio-leds";
		sigled: sig_led {
			gpios = <&gpio0 5 GPIO_ACTIVE_LOW>;
		};
	};

	buttons {
		compatible = "gpio-keys";
		button1: button_1 {
			gpios = < &gpio1 3 (GPIO_PULL_UP | GPIO_ACTIVE_LOW) >;
			label = "Animation Control Button";
		};
	};

	load_switch: load_switch {
		compatible = "power-switch";
		gpios = <&gpio0 9 GPIO_ACTIVE_HIGH>;
	};
};

//&adc0 {
//	status = "okay";
//	#address-cells = <1>;
//	#size-cells = <0>;
//
//	channel@0 {
//		reg = <0>;
//		zephyr,gain = "ADC_GAIN_1_4";
//		zephyr,reference = "ADC_REF_INTERNAL";
//		zephyr,acquisition-time = <ADC_ACQ_TIME_DEFAULT>;
//		zephyr,resolution = <12>;
//	};
//};

&i2s0 {
	status = "okay";
	pinctrl-0 = <&i2s0_default>;
	pinctrl-names = "default";

	dmas = <&dma 3>;
	dma-names = "tx";

	led_strip: ws2812@0 {
		compatible = "worldsemi,ws2812-i2s";

		reg = <0>;
		chain-length = <36>;
		lrck-period = <7>;
		color-mapping = <LED_COLOR_ID_GREEN
						 LED_COLOR_ID_RED
						 LED_COLOR_ID_BLUE>;
	};
};

&i2s1 {
	status = "okay";
	pinctrl-0 = <&i2s1_default>;
	pinctrl-names = "default";

	dmas = <&dma 4>;
	dma-names = "rx";
};

&dma {
	status = "okay";
};

&usb_serial {
	status = "okay";
};

&timer0 {
	status = "okay";
};

&timer1 {
	status = "okay";
};

&gpio0 {
	status = "okay";
};

&gpio1 {
	status = "okay";
};

&wdt0 {
	status = "okay";
};

&trng0 {
	status = "okay";
};
